<template >
  <div v-if="user.roles.includes('ADMIN')">
    <h1 class="title">{{model.productId ? 'Editar producto' : 'Nuevo producto'}}</h1>
    <h2 class="subtitle">{{model.productId ? ' ' : 'Creaci√≥n de producto.'}}</h2>

    <Loader v-if="isLoading" />
    <form v-else @submit.prevent="save">
      <div class="field">
        <input
          :class="{error: validation.hasError('model.productName')}"
          v-model="model.productName"
          class="input"
          type="text"
          placeholder="Ingrese el nombre"
        />
        <p class="help is-danger">{{validation.firstError('model.productName')}}</p>
      </div>

      <div class="select is-fullwidth">
        <select v-model.number="model.product_CategoryId">
          <option
            v-for="category in this.product_categories"
            :key="category.product_CategoryId"
            :value="category.product_CategoryId"
          >{{category.product_CategoryName}}</option>
        </select>
        <p class="help is-danger">{{validation.firstError('model.product_CategoryId')}} </p>
      </div>

      <!-- <div class="field">
        <input
          :class="{error: validation.hasError('model.product_CategoryId')}"
          v-model.number="model.product_CategoryId"
          class="input"
          type="number"
          placeholder="Ingrese la categoria"
        />
        <p class="help is-danger">{{validation.firstError('model.product_CategoryId')}}</p>
      </div> -->

      <div class="field">
        <input
          :class="{error: validation.hasError('model.productPrice')}"
          v-model.number="model.productPrice"
          class="input"
          type="number"
          placeholder="Ingrese el precio"
        />
        <p class="help is-danger">{{validation.firstError('model.productPrice')}}</p>
      </div>

      <div class="field">
        <input
          :class="{error: validation.hasError('model.stock')}"
          v-model.number="model.stock"
          class="input"
          type="number"
          placeholder="Ingrese el stock"
        />
        <p class="help is-danger">{{validation.firstError('model.stock')}}</p>
      </div>

      <div class="field">
        <input
          :class="{error: validation.hasError('model.sellDay')}"
          v-model.number="model.sellDay"
          class="input"
          type="number"
          placeholder="Ingrese el dia de venta"
        />
        <p class="help is-danger">{{validation.firstError('model.sellDay')}}</p>
      </div>

      <div class="field">
        <input
          :class="{error: validation.hasError('model.imageUrl')}"
          v-model="model.imageUrl"
          class="input"
          type="text"
          placeholder="Ingrese la url de la imagen"
        />
        <p class="help is-danger">{{validation.firstError('model.imageUrl')}}</p>
      </div>

      <div class="field">
        <input
          v-model="ingrediente"
          class="input"
          type="text"
          placeholder="Ingrese los ingredientes"
        />
      </div>

      <div class="field">
        <td class="title">Ingredientes</td>
        <tr v-for="item in model.ingredients" :key="item">
          <td>{{item}}</td>
        </tr>
      </div>
      <div class="field">
        <button
          type="button"
          class="button is-info is-normal"
          v-on:click="AddIngrediente(ingrediente)"
        >Agregar Ingrediente</button>
        <button
          type="button"
          class="button is-danger is-normal"
          v-on:click="DeleteIngrediente"
        >Eliminar Ingrediente</button>
      </div>

      <div class="field">
        <button type="submit" class="button is-info">Guardar</button>
      </div>
    </form>
  </div>
</template>

<script src="./ProductCreateOrUpdate.js"></script>
<style scoped>
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type="number"] {
    -moz-appearance: textfield;
}
</style>